# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

interface Node {
  id: String!
}

interface Person implements Node {
  userId: String!
  name: String!
  id: String!
}

type Comment {
  id: String!
  content: String!
  createdAt: String!
  comments(first: Int = 10, offset: Int = 0): CommentsConnection!
  trendingComments(first: Int = 10, offset: Int = 0): CommentsConnection!
  votes(first: Int = 10, offset: Int = 0): VotesConnection!
  reports(first: Int = 10, offset: Int = 0): ReportsConnection!
  post: Post!

  """评论的创建者，评论是匿名评论时，creator为null"""
  creator: User
}

type CommentsConnection {
  nodes: [Comment!]!
  totalCount: Int!
}

type Post {
  id: String!
  title: String!
  content: String!
  createdAt: String!
  images: [String!]

  """帖子的创建者，当帖子是匿名帖子时，返回null"""
  creator: User

  """帖子的评论"""
  comments(first: Int = 10, offset: Int = 0): CommentsConnection!

  """帖子所属的主题"""
  subject: Subject

  """帖子的点赞"""
  votes(first: Int = 10, offset: Int = 0): VotesConnection!

  """帖子收到的举报"""
  reports(first: Int = 10, offset: Int = 0): ReportsConnection!

  """获取帖子的折叠评论"""
  foldedComments(first: Int = 10, offset: Int = 0): CommentsConnection!

  """按热度返回评论"""
  trendingComments(first: Int = 10, offset: Int = 0): CommentsConnection!
}

type PostsConnection {
  nodes: [Post!]!
  totalCount: Int!
}

type Block {
  id: String!
  createdAt: String!
  description: String!
  to: User!
  creator: Admin!
}

type BlocksConnection {
  nodes: [Block!]!
  totalCount: Int!
}

"""凭证是成为管理员的前提"""
type ICredential {
  id: String!
  createdAt: String!
  creator: Admin!
  to: Admin!
}

type ICredentialsConnection {
  nodes: [ICredential!]!
  totalCount: Int!
}

type Fold {
  id: String!
  createdAt: String!
  creator: Admin!
  to: Comment!
}

type FoldsConnection {
  nodes: [Fold!]!
  totalCount: Int!
}

type Pin {
  id: String!
  createdAt: String!
  creator: Admin!
  to: PostAndCommentUnion!
}

union PostAndCommentUnion = Post | Comment

type PinsConnection {
  totalCount: Int!
  nodes: [Pin!]!
}

type Privilege {
  id: String!
  createdAt: String!
  value: IPRIVILEGE!
  to: AdminAndUserUnion!
  creator: Admin!
}

enum IPRIVILEGE {
  ROOT
  CAN_CREATE_ADMIN
  CAN_DELETE_ADMIN
  CAN_DELETE_USER
  CAN_CREATE_USER
  CAN_UPDATE_USER
}

union AdminAndUserUnion = User | Admin

type PrivilegesConnection {
  nodes: [Privilege!]!
  totalCount: Int!
}

type Admin {
  id: String!
  userId: String!
  name: String!
  avatarImageUrl: String!
  createdAt: String!
  updatedAt: String!
  lastLoginedAt: String!

  """管理员的凭证"""
  credential: ICredential

  """当前管理员认证过的其他管理员"""
  credentials(first: Int = 10, offset: Int = 0): ICredentialsConnection!

  """当前管理员拥有的权限"""
  privileges(first: Int = 10, offset: Int = 0): PrivilegesConnection!

  """当前管理员折叠的评论"""
  folds(first: Int = 10, offset: Int = 0): FoldsConnection!

  """当前管理员拉黑的用户"""
  blocks(first: Int = 10, offset: Int = 0): BlocksConnection!

  """当前管理员创建的置顶"""
  pins(first: Int = 10, offset: Int = 0): PinsConnection!
}

type AdminsConnection {
  nodes: [Admin!]!
  totalCount: Int!
}

type NodesConnection {
  edges: [NodeEdge!]!
  nodes: [Node!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type NodeEdge {
  cursor: String!
  node: Node!
}

type User implements Person & Node {
  """id 自动生成"""
  id: String!

  """用户账号"""
  userId: String!

  """用户昵称"""
  name: String!

  """学号"""
  studentId: Int

  """微信openId,注册时传入微信code自动通过微信提供的接口获取获取"""
  openId: String!

  """微信unionId,注册时传入微信code自动通过微信提供的接口获取获取"""
  unionId: String!

  """用户性别"""
  gender: GENDER

  """学院"""
  college: String

  """校区"""
  subCampus: String

  """学校"""
  school: String

  """年级"""
  grade: String

  """用户创建时间"""
  createdAt: String!

  """用户信息的更新时间"""
  updatedAt: String!

  """用户上一次调用login接口获取token的系统时间"""
  lastLoginedAt: String!

  """用户头像链接"""
  avatarImageUrl: String!

  """分页返回帖子"""
  posts(first: Int = 10, offset: Int = 0): PostsConnection!

  """用户创建的主题"""
  subjects(first: Int = 10, offset: Int = 0): SubjectsConnection!

  """用户创建的会话"""
  conversations(first: Int = 10, offset: Int = 0): ConversationsConnection!

  """用户收到的举报"""
  reports(first: Int = 10, offset: Int = 0): ReportsConnection!

  """当前用户的ddl信息"""
  deadlines(startTime: String!, endTime: String!, first: Int!): DeadlinesConnection!

  """当前用户的课程信息"""
  curriculums(first: Int = 10, offset: Int = 0): CurriculumsConnection!
}

enum GENDER {
  NONE
  MALE
  FEMALE
}

type LoginResult implements Node & Person {
  id: String!

  """用户账号"""
  userId: String!

  """用户昵称"""
  name: String!

  """学号"""
  studentId: Int

  """微信openId,注册时传入微信code自动通过微信提供的接口获取获取"""
  openId: String!

  """微信unionId,注册时传入微信code自动通过微信提供的接口获取获取"""
  unionId: String!

  """用户性别"""
  gender: GENDER

  """学院"""
  college: String

  """校区"""
  subCampus: String

  """学校"""
  school: String

  """年级"""
  grade: String

  """用户创建时间"""
  createdAt: String!

  """用户信息的更新时间"""
  updatedAt: String!

  """用户上一次调用login接口获取token的系统时间"""
  lastLoginedAt: String!

  """用户头像链接"""
  avatarImageUrl: String!

  """分页返回帖子"""
  posts(first: Int = 10, offset: Int = 0): PostsConnection!

  """用户创建的主题"""
  subjects(first: Int = 10, offset: Int = 0): SubjectsConnection!

  """用户创建的会话"""
  conversations(first: Int = 10, offset: Int = 0): ConversationsConnection!

  """用户收到的举报"""
  reports(first: Int = 10, offset: Int = 0): ReportsConnection!

  """当前用户的ddl信息"""
  deadlines(startTime: String!, endTime: String!, first: Int!): DeadlinesConnection!

  """当前用户的课程信息"""
  curriculums(first: Int = 10, offset: Int = 0): CurriculumsConnection!

  """token"""
  token: String!
}

type PageInfo {
  endCursor: String!
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String!
}

type UsersConnection {
  nodes: [User!]!
  totalCount: Int!
}

type Report implements Node {
  id: String!
  createdAt: String!
  type: REPORT_TYPE!
  description: String!
  state: REPORT_STATE!

  """被举报的对象"""
  to: Report2Union!

  """举报的创建者"""
  creator: User!

  """举报所在的会话"""
  conversation: Conversation!
}

enum REPORT_TYPE {
  LEWD_HARASS
  FRAUD
  OTHER
}

enum REPORT_STATE {
  OPEN
  PENDING
  CLOSE
}

union Report2Union = User | Post | Comment

type ReportsConnection {
  nodes: [Report!]!
  totalCount: Int!
}

type Conversation implements Node {
  id: String!
  createdAt: String!
  title: String!
  description: String!
  state: CONVERSATION_STATE!

  """返回会话中的所有消息"""
  messages(first: Int = 10, offset: Int = 0): MessageItemConnection!

  """返回会话的参与者"""
  participants(first: Int = 10, offset: Int = 0): ParticipantsConnection!
}

enum CONVERSATION_STATE {
  RUNNING
  CLOSE
}

type MessageItemConnection {
  nodes: [MessageItem!]!
  totalCount: Int!
}

union MessageItem = Message | Report

type ParticipantsConnection {
  nodes: [User!]!
  totalCount: Int!
}

type ConversationsConnection {
  nodes: [Conversation!]!
  totalCount: Int!
}

type Message implements Node {
  id: String!
  createdAt: String!
  content: String!

  """返回消息所属的会话"""
  conversation: Conversation!

  """返回消息的创建者"""
  creator: MessageCreatorUnion!
}

union MessageCreatorUnion = User | Admin

type Votable {
  """Number of upvotes that this node has received."""
  totalCount: Int!

  """
  Whether or not the current user can add or remove an upvote on this node.
  """
  viewerCanUpvote: Boolean!

  """Whether or not the current user has already upvoted this node."""
  viewerHasUpvoted: Boolean!
}

type VotesConnection {
  totalCount: Int!
  viewerCanUpvote: Boolean!
  viewerHasUpvoted: Boolean!
  nodes: [Vote!]!
}

type Vote {
  id: String!
  createdAt: String!
}

type Curriculum {
  id: String!

  """上课地点"""
  destination: String!

  """第几节课开始"""
  start: Int!

  """第几节课结束"""
  end: Int!

  """课程名称"""
  name: String!

  """课程周期，比如 1-17周"""
  circle: String!

  """课程描述，比如 1-17周 星期五 第3-4节 致理楼L1-302,1-17周 星期四 第3-4节 致理楼L1-302"""
  description: String!

  """该节课位于一星期中的第几天"""
  dayOfWeek: Int!
}

type CurriculumsConnection {
  nodes: [Curriculum!]!
  totalCount: Int!
}

type SetDbSchema {
  arrayIndexOffset: Int!
  array: [String!]!
  pivot_: Float!
  wrappers_: String
  messageId_: String
  convertedPrimitiveFields_: String!
}

type Deadline {
  id: String!
  courseContentId: Int!
  courseId: Int!
  ownerUserId: Int!
  notificationIds: [Int!]!
  parentId: String!
  sourceId: String!
  courseName: String!
  dataPending: Boolean!
  dateAdded: String!
  startDate: String!
  endDate: String
  dueDate: String!
  eventType: DEADLINE_EVENT_TYPE!
  eventUrl: String
  groupCount: Int!
  ownerName: String!
  receiverCount: Int!
  recipientCount: Int!
  recipientId: Int!
  recipientType: DEADLINE_RECIPIENT_TYPE!
  seen: Boolean!
  sourceData: String
  sourceDataType: DEADLINE_SOURCE_DATA_TYPE!
  sourceType: DEADLINE_SOURCE_TYPE!
  title: String!
  type: DEADLINE_TYPE!
  viewId: Int!
  creator: User!
}

enum DEADLINE_EVENT_TYPE {
  OVERDUE
  DUE
}

enum DEADLINE_RECIPIENT_TYPE {
  RECEIVER
}

enum DEADLINE_SOURCE_DATA_TYPE {
  BLACKBOARD_PLATFORM_GRADEBOOK2_GRADABLEITEM
}

enum DEADLINE_SOURCE_TYPE {
  AS
}

enum DEADLINE_TYPE {
  SCHEDULED
}

type DeadlinesConnection {
  nodes: [Deadline!]!
  totalCount: Int!
}

type Delete {
  id: String!
  createdAt: String!
  creator: Admin!
  to: PostAndCommentUnion!
}

type DeletesConnection {
  nodes: [Delete!]!
  totalCount: Int!
}

type Subject {
  id: String!
  createdAt: String!
  title: String!
  description: String!
  avatarImageUrl: String!
  backgroundImageUrl: String!

  """主题的创建者"""
  creator: User!

  """分页返回主题中的帖子"""
  posts(first: Int = 10, offset: Int = 0): PostsConnection!
}

type SubjectsConnection {
  nodes: [Subject!]!
  totalCount: Int!
}

type SearchResultItemConnection {
  totalCount: Int!
  nodes: [SearchResultItem!]!
}

union SearchResultItem = Post | User | Comment | Subject

type PostImagesUploadCredentialInfo {
  """签证生效时间"""
  startTime: Int!

  """签证过期时间"""
  expiredTime: Int!
  expiration: String!
  sessionToken: String!
  tmpSecretId: String!
  tmpSecretKey: String!

  """桶id"""
  bucket: String!

  """桶所在的地域"""
  region: String!

  """key"""
  keys: [String!]!
}

type AvatarImageUploadCredentialInfo {
  startTime: Int!
  expiredTime: Int!
  expiration: String!
  sessionToken: String!
  tmpSecretId: String!
  tmpSecretKey: String!
  bucket: String!
  region: String!
  key: String!
}

type View {
  id: String!
  createdAt: String!
}

type Query {
  post(id: String!): Post!
  posts(first: Int = 10, offset: Int = 0): PostsConnection!
  trendingPosts(first: Int = 10, offset: Int = 0): PostsConnection!

  """当前id对应的的用户画像"""
  whoAmI: AdminAndUserWithPrivatePropsUnion!

  """分页返回用户"""
  users(first: Int = 10, offset: Int = 0): UsersConnection!
  comment(id: String!): Comment!

  """根据id返回管理员"""
  admin(id: String!): Admin!

  """返回所有的管理员"""
  admins(first: Int = 10, offset: Int = 0): AdminsConnection!

  """根据主题id返回对应的主题"""
  subject(id: String!): Subject!

  """分页返回主题"""
  subjects(first: Int = 10, offset: Int = 0): SubjectsConnection!
  search(
    first: Int = 10
    offset: Int = 0

    """待检索的关键字"""
    query: String!
    type: SEARCHTYPE!
  ): SearchResultItemConnection!
  node(id: String!): Node!
  nodes(ids: [String!]!): NodesConnection!

  """根据举报id返回举报"""
  report(id: String!): Report!

  """所有的举报"""
  reports(first: Int = 10, offset: Int = 0): ReportsConnection!

  """返回指定的消息"""
  message(id: String!): Message!

  """返回指定的会话"""
  conversation(id: String!): Conversation!

  """分页返回会话"""
  conversations(first: Int = 10, offset: Int = 0): ConversationsConnection!
  delete(deleteId: String!): Delete!
  deletes(first: Int = 10, offset: Int = 0): DeletesConnection!

  """用户上传头像时，先根据文件名获取临时上传凭证信息"""
  getAvatarImageUploadCredentialInfo(fileName: String!): AvatarImageUploadCredentialInfo!

  """用户上传帖子图片时，先根据文件名获取临时上传凭证信息"""
  getPostImagesUploadCredentialInfo(fileNames: [String!]!): PostImagesUploadCredentialInfo!
  privilege(id: String!): Privilege!
  privileges(first: Int = 10, offset: Int = 0): PrivilegesConnection!
  deadline(deadlineId: String!): Deadline!
  curriculums(first: Int = 10, offset: Int = 0): CurriculumsConnection!
  curriculum(id: String!): Curriculum!
  folds(first: Int = 10, offset: Int = 0): FoldsConnection!

  """所有的拉黑"""
  blocks(first: Int = 10, offset: Int = 0): BlocksConnection!

  """获取一个凭证"""
  credential(credentialId: String!): ICredential!

  """获取所有凭证"""
  credentials(first: Int = 10, offset: Int = 0): ICredentialsConnection!
  pin(id: String!): Pin!
  pins(first: Int = 10, offset: Int = 0): PinsConnection!
}

union AdminAndUserWithPrivatePropsUnion = UserWithPrivateProps | Admin

"""包含属性是否个人可见的用户对象"""
type UserWithPrivateProps implements Person & Node {
  """id 自动生成"""
  id: String!

  """用户账号"""
  userId: String!

  """用户昵称"""
  name: String!

  """学号"""
  studentId: Int

  """微信openId,注册时传入微信code自动通过微信提供的接口获取获取"""
  openId: String!

  """微信unionId,注册时传入微信code自动通过微信提供的接口获取获取"""
  unionId: String!

  """用户性别"""
  gender: GENDER

  """学院"""
  college: String

  """校区"""
  subCampus: String

  """学校"""
  school: String

  """年级"""
  grade: String

  """用户创建时间"""
  createdAt: String!

  """用户信息的更新时间"""
  updatedAt: String!

  """用户上一次调用login接口获取token的系统时间"""
  lastLoginedAt: String!

  """用户头像链接"""
  avatarImageUrl: String!

  """分页返回帖子"""
  posts(first: Int = 10, offset: Int = 0): PostsConnection!

  """用户创建的主题"""
  subjects(first: Int = 10, offset: Int = 0): SubjectsConnection!

  """用户创建的会话"""
  conversations(first: Int = 10, offset: Int = 0): ConversationsConnection!

  """用户收到的举报"""
  reports(first: Int = 10, offset: Int = 0): ReportsConnection!

  """当前用户的ddl信息"""
  deadlines(startTime: String!, endTime: String!, first: Int!): DeadlinesConnection!

  """当前用户的课程信息"""
  curriculums(first: Int = 10, offset: Int = 0): CurriculumsConnection!

  """学院属性是否私有"""
  isCollegePrivate: Boolean

  """校区属性是否私有"""
  isSubCampusPrivate: Boolean

  """性别属性是否私有"""
  isGenderPrivate: Boolean

  """学校属性是否私有"""
  isSchoolPrivate: Boolean

  """年级属性是否私有"""
  isGradePrivate: Boolean
}

enum SEARCHTYPE {
  USER
  COMMENT
  POST
  SUBJECT
}

type Mutation {
  """创建一个帖子"""
  createPost(
    """帖子标题"""
    title: String!

    """帖子内容"""
    content: String!

    """帖子图片"""
    images: [String!]

    """帖子所属的主题"""
    subjectId: String

    """是否匿名帖子"""
    isAnonymous: Boolean = false
  ): Post!

  """用户登录"""
  login(
    """用户账号"""
    userId: String!

    """用户密码"""
    sign: String!
  ): LoginResult!

  """用户注册"""
  register(
    """学号"""
    studentId: Int

    """学院"""
    college: UserStringPropMap!

    """校区"""
    subCampus: UserStringPropMap!

    """用户账号"""
    userId: String!

    """用户密码"""
    sign: String!

    """微信login code"""
    code: String

    """用户昵称"""
    name: String!

    """用户性别"""
    gender: UserGenderPropMap!

    """用户头像链接"""
    avatarImageUrl: String!

    """学校"""
    school: UserStringPropMap!

    """年级"""
    grade: UserStringPropMap!
  ): User!

  """更新用户画像"""
  updateUser(
    """学院"""
    college: UserStringPropMap

    """校区"""
    subCampus: UserStringPropMap

    """用户密码"""
    sign: String

    """用户昵称"""
    name: String

    """用户性别"""
    gender: UserGenderPropMap

    """用户头像链接"""
    avatarImageUrl: String

    """用户的学校"""
    school: UserStringPropMap

    """用户的年级"""
    grade: UserStringPropMap
  ): User!
  addCommentOnComment(
    """评论的内容"""
    content: String!

    """被评论的对象的id"""
    to: String!

    """是否匿名发布这条评论"""
    isAnonymous: Boolean = false
  ): Comment!
  addCommentOnPost(
    """评论的内容"""
    content: String!

    """被评论的对象的id"""
    to: String!

    """是否匿名发布这条评论"""
    isAnonymous: Boolean = false
  ): Comment!
  addUpvoteOnPost(postId: String!): Votable!
  addUpvoteOnComment(commentId: String!): Votable!
  removeUpvoteOnComment(from: String!): Votable!
  removeUpvoteOnPost(from: String!): Votable!

  """注册一个管理员，需要使用authen认证新注册的管理员"""
  registerAdmin(
    userId: String!
    name: String!
    avatarImageUrl: String!

    """管理员密码"""
    sign: String!
  ): Admin!

  """已存在的管理员认证一个新注册的管理员"""
  authenAdmin(to: String!): Admin!

  """创建一个主题"""
  createSubject(input: CreateSubjectInput!): Subject!

  """举报一条评论"""
  addReportOnComment(
    """举报的类型，枚举值"""
    type: REPORT_TYPE!

    """举报的描述"""
    description: String!

    """被举报对象的id"""
    to: String!
  ): Report!

  """举报一个帖子"""
  addReportOnPost(
    """举报的类型，枚举值"""
    type: REPORT_TYPE!

    """举报的描述"""
    description: String!

    """被举报对象的id"""
    to: String!
  ): Report!

  """举报一个用户"""
  addReportOnUser(
    """举报的类型，枚举值"""
    type: REPORT_TYPE!

    """举报的描述"""
    description: String!

    """被举报对象的id"""
    to: String!
  ): Report!

  """管理员接口：认为举报无效"""
  discardReport(content: String!, reportId: String!): Boolean!

  """管理员接口：认为举报有效"""
  acceptReport(content: String!, reportId: String!): Boolean!

  """向指定的会话中添加一条消息"""
  addMessageOnConversation(content: String!, id: String!): Message!

  """创建一个会话"""
  createConversation(title: String!, description: String!, participants: [String!]!): Conversation!

  """关闭一个会话"""
  closeConversation(conversationId: String!): Conversation!
  setSchema: SetDbSchema!
  dropAllData: Boolean!
  dropData: Boolean!

  """管理员删除一个帖子"""
  deletePost(postId: String!): Delete!

  """管理员删除一个评论"""
  deleteComment(commentId: String!): Delete!
  addPrivilegeOnAdmin(privilege: IPRIVILEGE!, adminId: String!): Privilege!
  removePrivilegeOnAdmin(privilege: IPRIVILEGE!, from: String!): Boolean!

  """在当前用户上添加一个ddl"""
  addDeadline(courseContentId: Int!, courseId: Int!, ownerUserId: Int!, notificationIds: [Int!]!, parentId: String!, sourceId: String!, courseName: String!, dataPending: Boolean!, dateAdded: String!, startDate: String!, endDate: String, dueDate: String!, eventType: DEADLINE_EVENT_TYPE!, eventUrl: String, groupCount: Int!, ownerName: String!, receiverCount: Int!, recipientCount: Int!, recipientId: Int!, recipientType: DEADLINE_RECIPIENT_TYPE!, seen: Boolean!, sourceData: String, sourceDataType: DEADLINE_SOURCE_DATA_TYPE!, sourceType: DEADLINE_SOURCE_TYPE!, title: String!, type: DEADLINE_TYPE!, viewId: Int!): Deadline!
  addViewOnPost(postId: String!): View!
  addViewOnComment(commentId: String!): View!
  addCurriculum(
    """上课地点"""
    destination: String!

    """第几节课开始"""
    start: Int!

    """第几节课结束"""
    end: Int!

    """课程名称"""
    name: String!

    """课程周期，比如 1-17周"""
    circle: String!

    """课程描述，比如 1-17周 星期五 第3-4节 致理楼L1-302,1-17周 星期四 第3-4节 致理楼L1-302"""
    description: String!

    """该节课位于一星期中的第几天"""
    dayOfWeek: Int!

    """授课教师的名字"""
    educatorName: String!

    """课程号"""
    curriculumId: String!
  ): Curriculum!
  addFoldOnComment(commentId: String!): Fold!
  removeBlockOnUser(from: String!): Boolean!
  addBlockOnUser(id: String!, description: String!): Block!
  addPinOnPost(postId: String!): Pin!
  removePinOnPost(from: String!): Boolean!
}

input UserStringPropMap {
  """属性的值"""
  value: String!

  """是否私有属性"""
  isPrivate: Boolean = false
}

input UserGenderPropMap {
  """属性的值"""
  value: GENDER!

  """是否私有属性"""
  isPrivate: Boolean = false
}

input CreateSubjectInput {
  title: String!
  description: String!
  avatarImageUrl: String!
  backgroundImageUrl: String!
}
