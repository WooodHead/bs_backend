# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

interface Person implements Node {
  userId: String!
  name: String!
  id: String!
}

interface Node {
  id: String!
}

type User implements Person & Node {
  userId: String!
  name: String!
  id: String!
  openId: String!
  unionId: String!
  gender: GENDER!
  createdAt: String!
  updatedAt: String!
  lastLoginedAt: String!
  avatarImageUrl: String!
  school: String!
  grade: String!
  posts(first: Int = 0, offset: Int = 0): PostsConnection!
  followers(first: Int = 0, offset: Int = 0): FollowersConnection!
  followings(first: Int = 0, offset: Int = 0): FolloweringsConnection!
  subjects(first: Int = 0, offset: Int = 0): SubjectsConnection!
  comments(first: Int = 0, offset: Int = 0): CommentsConnection!
}

enum GENDER {
  NONE
  MALE
  FEMALE
}

type LoginResult implements Node & Person {
  userId: String!
  name: String!
  id: String!
  openId: String!
  unionId: String!
  gender: GENDER!
  createdAt: String!
  updatedAt: String!
  lastLoginedAt: String!
  avatarImageUrl: String!
  school: String!
  grade: String!
  posts(first: Int = 0, offset: Int = 0): PostsConnection!
  followers(first: Int = 0, offset: Int = 0): FollowersConnection!
  followings(first: Int = 0, offset: Int = 0): FolloweringsConnection!
  subjects(first: Int = 0, offset: Int = 0): SubjectsConnection!
  comments(first: Int = 0, offset: Int = 0): CommentsConnection!
  token: String!
}

type PageInfo {
  endCursor: String!
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String!
}

type UsersConnection {
  nodes: [User!]!
  totalCount: Int!
}

type FollowersConnection {
  edges: [UserEdge!]!
  nodes: [User!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type UserEdge {
  cursor: String!
  node: User!
}

type FolloweringsConnection {
  edges: [UserEdge!]!
  nodes: [User!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type NodesConnection {
  edges: [NodeEdge!]!
  nodes: [Node!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type NodeEdge {
  cursor: String!
  node: Node!
}

type Admin implements Node & Person {
  userId: String!
  name: String!
  id: String!
  avatarImageUrl: String!
  createdAt: String!
  updatedAt: String!
  lastLoginedAt: String!
}

type InviteTokenResult {
  token: String!
}

type Votable {
  """Number of upvotes that this node has received."""
  upvoteCount: Int!

  """
  Whether or not the current user can add or remove an upvote on this node.
  """
  viewerCanUpvote: Boolean!

  """Whether or not the current user has already upvoted this node."""
  viewerHasUpvoted: Boolean!
}

type VotesConnection {
  totalCount: Int!
  viewerCanUpvote: Boolean!
  viewerHasUpvoted: Boolean!
  nodes: [Vote!]!
}

type Vote {
  id: String!
  createdAt: String!
}

type Comment implements Node {
  id: String!
  content: String!
  createdAt: String!
  comments(first: Int = 0, offset: Int = 0): CommentsConnection!
  votes(first: Int = 0, offset: Int = 0): VotesConnection!
}

type CommentsConnection {
  nodes: [Comment!]!
  totalCount: Int!
}

type Subject {
  id: String!
  createdAt: String!
  title: String!
  description: String!
  avatarImageUrl: String!
  backgroundImageUrl: String!
  creator: User!
  followers(last: Float!, first: Float!, before: String!, after: String!): FollowersConnection!
  posts(offset: Int = 0, first: Int = 2): PostsConnection!
}

type SubjectsConnection {
  nodes: [Subject!]!
  totalCount: Int!
}

type Post {
  id: String!
  title: String!
  content: String!
  createdAt: String!
  images: [String!]!
  creator: User!
  comments(first: Int = 0, offset: Int = 0): CommentsConnection!
  subject: Subject
  votes(first: Int = 0, offset: Int = 0): VotesConnection!
}

type PostsConnection {
  nodes: [Post!]!
  totalCount: Int!
}

type SearchResultItemConnection {
  totalCount: Int!
  nodes: [SearchResultItem!]!
}

union SearchResultItem = Post | User | Comment | Subject

type Report {
  id: String!
  createdAt: String!
  type: REPORT_TYPE!
  description: String!
  state: REPORT_STATE!
}

enum REPORT_TYPE {
  LEWD_HARASS
  FRAUD
  OTHER
}

enum REPORT_STATE {
  OPEN
  PENDING
  CLOSE
}

type Message {
  createdAt: String!
  content: String!
}

type MessagesConnection {
  nodes: [Message!]!
  totalCount: Int!
}

type Conversation implements Node {
  id: String!
  createdAt: String!
  title: String!
  description: String!
  state: CONVERSATION_STATE!
}

enum CONVERSATION_STATE {
  RUNNING
  CLOSE
}

type Query {
  post(id: String!): Post!
  posts(first: Int = 0, offset: Int = 0): PostsConnection!
  login(
    """用户 userId，注意不是 id"""
    userId: String!
    sign: String!
  ): LoginResult!
  authenticate(userId: String!): LoginResult!
  whoAmI: User!
  users(first: Int = 0, offset: Int = 0): UsersConnection!
  comment(id: String!): Comment!
  createInviteToken: InviteTokenResult!
  subject(id: String!): Subject!
  subjects(offset: Int = 0, first: Int = 0): SubjectsConnection!
  search(
    offset: Int = 0
    first: Int = 0

    """待检索的关键字"""
    query: String!
    type: SEARCHTYPE!
  ): SearchResultItemConnection!
  node(id: String!): Node!
  nodes(ids: [String!]!): NodesConnection!
  messages(first: Int = 0, offset: Int = 0): MessagesConnection!
  message: Message!
  conversation: Conversation!
}

enum SEARCHTYPE {
  USER
  COMMENT
  POST
  SUBJECT
}

type Mutation {
  createPost(
    """帖子标题"""
    title: String!

    """帖子内容"""
    content: String!

    """帖子图片"""
    images: [String!]

    """帖子所属的主题"""
    subjectId: String
  ): Post!
  deletePost(id: String!): Boolean!
  register(input: UserRegisterInput!): User!
  followUser(to: String!): Boolean!
  unfollowUser(to: String!): Boolean!
  followSubject(id: String!): Subject!

  """更新当前用户"""
  updateUser(name: String, gender: GENDER, avatarUrl: String, school: String, grade: String, sign: String): User!
  addACommentOnComment(
    """相应的评论的id"""
    to: String!
    content: String!
  ): Comment!
  addACommentOnPost(
    """相应的帖子的id"""
    to: String!
    content: String!
  ): Comment!
  addUpvoteOnPost(to: String!): Votable!
  addUpvoteOnComment(to: String!): Votable!
  removeUpvoteOnComment(from: String!): Votable!
  removeUpvoteOnPost(from: String!): Votable!
  createAdmin(input: CreateAdminInput!, inviteToken: String!): Admin!
  createSubject(input: CreateSubjectInput!): Subject!
  updateSubject(input: UpdateSubjectInput!): Subject!
  addReportOnComment(id: String!): Report!
  addReportOnPost(id: String!): Report!
  addReportOnUser(id: String!): Report!
  createConversation(title: String!, description: String!, participants: [String!]!): Conversation!
}

input UserRegisterInput {
  openId: String!
  unionId: String!
  name: String!
  gender: GENDER!
  avatarImageUrl: String!
  school: String!
  grade: String!
  userId: String!
  sign: String!
}

input CreateAdminInput {
  userId: String!
  name: String!
  avatarImageUrl: String!
}

input CreateSubjectInput {
  title: String!
  description: String!
  avatarImageUrl: String!
  backgroundImageUrl: String!
}

input UpdateSubjectInput {
  id: String!
  title: String
  description: String
  avatarUrl: String
  background: String
}
